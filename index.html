<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FarmPro Assistant - Ultimate Farming Solution</title>

  <!-- PWA Meta Tags -->
  <meta name="application-name" content="FarmPro Assistant">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="FarmPro Assistant">
  <meta name="description" content="Complete farm management solution">
  <meta name="format-detection" content="telephone=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="msapplication-TileColor" content="#388e3c">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="theme-color" content="#388e3c">

  <!-- Favicons (kept as data URIs or links in original repo) -->

  <style>
    :root { --primary: #388e3c; --secondary: #2e7d32; --danger: #d32f2f; --warning: #f57c00; --info: #1976d2; --light: #f5f5f5; --dark: #333; --muted: #757575; --growth: #4caf50; }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;background:#f8f9fa;color:var(--dark);line-height:1.6}
    .app-container{max-width:1200px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column}
    header{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;padding:1.5rem;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,.1)}
    .farm-profile-header{background:#fff;padding:1.5rem;border-bottom:1px solid #e0e0e0;box-shadow:0 2px 8px rgba(0,0,0,.1)}
    .farm-profile-content{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
    .farm-name{font-size:1.5rem;font-weight:700;color:var(--primary);margin-bottom:.5rem}
    .dashboard-section{background:#fff;padding:1.5rem;margin:1rem 0;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
    .dashboard-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:1.5rem}
    .dashboard-card{background:#f8f9fa;padding:1.5rem;border-radius:8px;border-left:4px solid var(--primary)}
    .tab-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin:1rem 0}
    .tab-card{background:#fff;border-radius:12px;padding:1.5rem;text-align:center;cursor:pointer;transition:all .3s;box-shadow:0 2px 8px rgba(0,0,0,.1);border:2px solid transparent}
    .tab-card:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.2);border-color:var(--primary)}
    .tab-card.active{background:var(--primary);color:#fff;transform:translateY(-5px)}

    /* Consolidated modal rules */
    .activation-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1000;display:flex;justify-content:center;align-items:center}
    .activation-content{background:#fff;padding:2rem;border-radius:12px;max-width:500px;width:90%;box-shadow:0 10px 30px rgba(0,0,0,.3);max-height:90vh;overflow-y:auto}
    .activation-content::-webkit-scrollbar{width:8px}
    .activation-content::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}
    .activation-content::-webkit-scrollbar-thumb{background:var(--primary);border-radius:4px}

    .trial-countdown{background:#ffebee;color:var(--danger);padding:.8rem 1.5rem;border-radius:8px;margin:1rem 0;text-align:center;font-weight:700;border-left:4px solid var(--danger)}
    .readonly-message{background:#ffebee;color:var(--danger);padding:1rem;border-radius:8px;margin:1rem 0;text-align:center;font-weight:700;border-left:4px solid var(--danger)}

    footer{background:var(--dark);color:#fff;padding:1.5rem;text-align:center;margin-top:2rem}
    @media(max-width:768px){.farm-profile-content{flex-direction:column;align-items:flex-start}.dashboard-grid{grid-template-columns:1fr}.tab-grid{grid-template-columns:repeat(2,1fr)}.quick-actions{justify-content:center}}
    @media(max-width:480px){.tab-grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <!-- Splash Screen -->
  <div class="app-splash" id="splashScreen" role="status" aria-live="polite" style="position:fixed;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary),var(--secondary));z-index:9999">
    <div class="splash-logo" style="font-size:4rem;margin-bottom:1rem">üå±</div>
    <div class="splash-text" style="color:#fff;font-size:2rem;font-weight:700">FarmPro Assistant</div>
  </div>

  <div id="notificationContainer" aria-live="polite"></div>

  <div class="app-container">
    <header>
      <div>FarmPro Assistant</div>
      <div>Cultivate Your Success</div>
    </header>

    <main id="mainContent" style="padding:0 1.5rem;">
      <div id="setupScreen" class="setup-screen" style="display:none;padding:2rem;max-width:800px;margin:2rem auto;background:#fff;border-radius:12px;box-shadow:0 5px 20px rgba(0,0,0,.1);text-align:center">
        <div class="setup-icon" style="font-size:4rem;margin-bottom:1rem;color:var(--primary)">üë®‚Äçüåæ</div>
        <h1 class="setup-title" style="font-size:1.8rem;color:var(--primary);margin-bottom:1rem">Welcome to FarmPro Assistant</h1>
        <p class="setup-description" style="color:var(--muted);margin-bottom:1rem">To get started, please set up your farm profile. This will begin your 7-day free trial.</p>
        <div style="text-align:left;max-width:400px;margin:0 auto">
          <div class="form-group" style="margin-bottom:1rem">
            <label for="setupFarmName">Farm Name:*</label>
            <input type="text" id="setupFarmName" placeholder="Green Valley Acres" required style="width:100%;padding:.6rem;border:1px solid #ddd;border-radius:6px">
          </div>
          <div class="form-group" style="margin-bottom:1rem">
            <label for="setupFarmerName">Farmer Name:*</label>
            <input type="text" id="setupFarmerName" placeholder="John Chibwe" required style="width:100%;padding:.6rem;border:1px solid #ddd;border-radius:6px">
          </div>
          <button id="saveProfileBtn" class="btn-harvest" style="width:100%;padding:1rem;font-size:1.1rem;background:linear-gradient(135deg,var(--primary),var(--growth));color:#fff;border:none;border-radius:6px">‚úÖ Save Farm Profile & Start 7-Day Trial</button>
        </div>
      </div>

      <div id="appInterface" style="display:none">
        <div class="farm-profile-header" id="farmProfileHeader">
          <div class="farm-profile-content">
            <div class="farm-info">
              <div class="farm-name" id="farmNameHeader">FarmPro Assistant</div>
              <div class="farm-details">
                <span id="farmSizeDisplay">Setup your farm profile</span>
                <span id="farmTypeDisplay"></span>
                <span id="farmStatusDisplay" class="status-warning">Not Configured</span>
              </div>
            </div>
            <div class="farm-actions">
              <button id="editProfileBtn" class="small">Edit Profile</button>
              <button id="activateBtn" class="small btn-harvest" style="display:none">Activate</button>
              <button id="shareBtn" class="small btn-outline">Share</button>
            </div>
          </div>
          <div id="trialStatus" class="trial-status" style="display:none;padding:1rem;margin-top:1rem">
            <h4>‚è≥ Trial Period Active</h4>
            <p>Your 7-day free trial is active. Activate now for uninterrupted access.</p>
          </div>
        </div>

        <div id="trialCountdown" class="trial-countdown" style="display:none;margin-top:1rem">‚è∞ Trial Expires in: <span id="countdownTimer">7 days 00:00:00</span></div>
        <div id="readOnlyMessage" class="readonly-message" style="display:none;margin-top:1rem">‚ö†Ô∏è Trial period expired. Please activate FarmPro for full access.</div>

        <section class="dashboard-section">
          <div class="dashboard-title"><span>üìä Farm Dashboard</span></div>
          <div class="dashboard-grid">
            <div class="dashboard-card"><h3>Planted Crops</h3><div class="value" id="cropCount">0</div></div>
            <div class="dashboard-card"><h3>Inventory Value</h3><div class="value" id="inventoryValue">0 Pula</div></div>
            <div class="dashboard-card"><h3>Pending Tasks</h3><div class="value" id="taskCount">0</div></div>
            <div class="dashboard-card"><h3>Financial Balance</h3><div class="value" id="financeBalance">0 Pula</div></div>
          </div>

          <div class="quick-actions" style="display:flex;gap:.5rem;flex-wrap:wrap">
            <button data-tab="cropGuideTab" class="small">üå± Crop Guide</button>
            <button data-tab="myCropsTab" class="small">üåæ My Crops</button>
            <button data-tab="inventoryTab" class="small">üì¶ Inventory</button>
            <button data-tab="posTab" class="small">üõí POS</button>
            <button data-tab="financeTab" class="small">üí∞ Finance</button>
            <button data-tab="clientsTab" class="small">üë• Clients</button>
            <button data-tab="tasksTab" class="small">üìã Tasks</button>
            <button data-tab="reportsTab" class="small">üìä Reports</button>
          </div>
        </section>

        <div class="tab-grid" id="mainTabGrid" role="tablist">
          <div class="tab-card" id="cropGuideTab" role="tab" tabindex="0">
            <div class="tab-icon">üå±</div><div class="tab-title">Crop Guide</div><div class="tab-description">Growing information & guides</div>
          </div>
          <div class="tab-card" id="myCropsTab" role="tab" tabindex="0">
            <div class="tab-icon">üåæ</div><div class="tab-title">My Crops</div><div class="tab-description">Manage planted crops</div>
          </div>
          <div class="tab-card" id="inventoryTab" role="tab" tabindex="0">
            <div class="tab-icon">üì¶</div><div class="tab-title">Inventory</div><div class="tab-description">Stock & product management</div>
          </div>
          <div class="tab-card" id="posTab" role="tab" tabindex="0">
            <div class="tab-icon">üõí</div><div class="tab-title">Point of Sale</div><div class="tab-description">Sales & transactions</div>
          </div>
          <div class="tab-card" id="financeTab" role="tab" tabindex="0">
            <div class="tab-icon">üí∞</div><div class="tab-title">Finance</div><div class="tab-description">Income, expenses & reports</div>
          </div>
          <div class="tab-card" id="clientsTab" role="tab" tabindex="0">
            <div class="tab-icon">üë•</div><div class="tab-title">Clients</div><div class="tab-description">Customer management</div>
          </div>
          <div class="tab-card" id="tasksTab" role="tab" tabindex="0">
            <div class="tab-icon">üìã</div><div class="tab-title">Tasks</div><div class="tab-description">Schedule & track work</div>
          </div>
          <div class="tab-card" id="reportsTab" role="tab" tabindex="0">
            <div class="tab-icon">üìä</div><div class="tab-title">Reports</div><div class="tab-description">Analytics & insights</div>
          </div>
          <div class="tab-card" id="premiumTab" role="tab" tabindex="0">
            <div class="tab-icon">‚≠ê</div><div class="tab-title">Premium</div><div class="tab-description">Advanced features & tools</div>
          </div>
        </div>

        <div class="content-area" id="contentArea" style="background:#fff;border-radius:12px;padding:1.5rem;margin:1rem 0;min-height:200px;box-shadow:0 2px 10px rgba(0,0,0,.1)"></div>

        <!-- Activation modal placeholder -->
        <div class="activation-modal" id="activationModal" aria-hidden="true">
          <div class="activation-content" role="dialog" aria-modal="true">
            <h2>Activate FarmPro</h2>
            <p>Activation options go here.</p>
            <div style="text-align:right;margin-top:1rem">
              <button id="closeActivation" style="margin-right:.5rem">Close</button>
              <button id="doActivate" class="btn-harvest">Activate</button>
            </div>
          </div>
        </div>

      </div>
    </main>

    <footer>
      <div class="contact-info">Contact: support@farmpro.example</div>
      <div class="support-text">Learn more at the project README</div>
    </footer>
  </div>

  <script>
    // Minimal initialization script: attach tab handlers, hide splash, wire simple modal
    document.addEventListener('DOMContentLoaded', function(){
      // Hide splash screen after a short delay
      var splash = document.getElementById('splashScreen');
      if(splash){ setTimeout(function(){ splash.style.display='none'; }, 700); }

      var appInterface = document.getElementById('appInterface');
      var setupScreen = document.getElementById('setupScreen');
      var saveBtn = document.getElementById('saveProfileBtn');

      // Load profile from localStorage (simple flow)
      var profile = null;
      try { profile = JSON.parse(localStorage.getItem('farmProfile')); } catch(e){ profile = null; }
      if(profile && profile.farmName){
        document.getElementById('farmNameHeader').textContent = profile.farmName || 'FarmPro Assistant';
        document.getElementById('farmSizeDisplay').textContent = (profile.hectares? profile.hectares+' ha' : '');
        setupScreen.style.display = 'none';
        appInterface.style.display = '';
      } else {
        setupScreen.style.display = '';
        appInterface.style.display = 'none';
      }

      if(saveBtn){
        saveBtn.addEventListener('click', function(){
          var farmName = document.getElementById('setupFarmName').value || 'My Farm';
          var farmerName = document.getElementById('setupFarmerName').value || '';
          var hectares = document.getElementById('setupHectares') ? document.getElementById('setupHectares').value : '';
          var profileObj = { farmName: farmName, farmerName: farmerName, hectares: hectares };
          localStorage.setItem('farmProfile', JSON.stringify(profileObj));
          document.getElementById('farmNameHeader').textContent = farmName;
          document.getElementById('farmSizeDisplay').textContent = (hectares? hectares+' ha' : '');
          setupScreen.style.display = 'none';
          appInterface.style.display = '';
          showNotification('Profile saved. Trial started.', 'success');
        });
      }

      // Tab handlers
      document.querySelectorAll('.tab-card').forEach(function(card){
        card.addEventListener('click', function(){
          document.querySelectorAll('.tab-card').forEach(function(c){ c.classList.remove('active'); });
          card.classList.add('active');
          var content = document.getElementById('contentArea');
          if(content){ content.textContent = card.querySelector('.tab-title').textContent + ' content will appear here.'; }
        });
        card.addEventListener('keydown', function(e){ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); card.click(); } });
      });

      // Quick actions buttons (data-tab)
      document.querySelectorAll('.quick-actions button, .quick-actions .small, .quick-actions [data-tab]').forEach(function(btn){
        btn.addEventListener('click', function(){
          var tab = btn.getAttribute('data-tab');
          if(tab){ var target = document.getElementById(tab); if(target) target.click(); }
        });
      });

      // Simple notification helper
      window.showNotification = function(msg, type){
        var container = document.getElementById('notificationContainer');
        var n = document.createElement('div'); n.className = 'notification '+(type||'info'); n.textContent = msg;
        n.style.position='fixed'; n.style.top='20px'; n.style.right='20px'; n.style.padding='1rem 1.5rem'; n.style.borderRadius='6px'; n.style.color='#fff'; n.style.zIndex=10001;
        if(type==='success') n.style.background='var(--primary)'; else if(type==='error') n.style.background='var(--danger)'; else if(type==='warning') n.style.background='var(--warning)'; else n.style.background='var(--info)';
        container.appendChild(n);
        setTimeout(function(){ n.style.opacity='0'; setTimeout(function(){ container.removeChild(n); },400); },3000);
      };

      // Activation modal simple wiring
      var activationModal = document.getElementById('activationModal');
      var activateBtn = document.getElementById('activateBtn');
      var closeActivation = document.getElementById('closeActivation');
      var doActivate = document.getElementById('doActivate');
      if(activateBtn){ activateBtn.addEventListener('click', function(){ if(activationModal) activationModal.style.display='flex'; }); }
      if(closeActivation){ closeActivation.addEventListener('click', function(){ if(activationModal) activationModal.style.display='none'; }); }
      if(doActivate){ doActivate.addEventListener('click', function(){ if(activationModal) activationModal.style.display='none'; showNotification('Activated. Thank you!', 'success'); }); }

    });
  </script>
</body>
</html>
